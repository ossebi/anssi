import{r as u,u as b,j as e}from"./app-DEUS2MBr.js";import{S as j,b as N,V as v}from"./index-BQS66ObU.js";import{C as y,a as E}from"./ckeditor-IcZjwGCE.js";import{b as p}from"./app-layout-Vwxekgor.js";function k({item:t,pageId:c}){const[s,d]=u.useState({}),{data:o,setData:l,post:x,put:h,errors:r,processing:m}=b({title:t?.title??"",content:t?.content??"",img_path:t?.img_path??"",page_id:c}),g=async()=>{try{return await N.validate(o,{abortEarly:!1}),d({}),!0}catch(a){if(a instanceof v){const i={};a.inner.forEach(n=>{n.path&&(i[n.path]=n.message)}),d(i)}return!1}},f=async a=>{a.preventDefault(),await g()&&(t?h(p.sections.update.url(t.id),{preserveScroll:!0}):x(p.sections.store.url(),{forceFormData:!0,preserveScroll:!0}))};return u.useEffect(()=>{t&&l({title:t.title??"",img_path:"",content:t.content??"",page_id:c})},[t,l]),e.jsxs("form",{onSubmit:f,className:"space-y-4 py-5",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:m,className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50 flex gap-x-2",children:[e.jsx(j,{className:"w-5"}),m?"Enregistrement...":t?"Mettre Ã  jour":"Enregistrer"]})}),e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block font-medium",children:"Titre"}),e.jsx("input",{id:"title",type:"text",value:o.title,onChange:a=>l("title",a.target.value),className:"w-full rounded border p-2"}),s.title&&e.jsx("p",{className:"text-sm text-red-500",children:s.title}),r.title&&e.jsx("p",{className:"text-sm text-red-500",children:r.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"image",className:"block font-medium",children:"Image"}),e.jsx("input",{id:"image",type:"file",accept:"image/*",onChange:a=>l("img_path",a.target.files?a.target.files[0]:""),className:"w-full rounded border p-2"}),s.image&&e.jsx("p",{className:"text-sm text-red-500",children:s.image}),r.img_path&&e.jsx("p",{className:"text-sm text-red-500",children:r.img_path})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"content",className:"block font-medium",children:"Contenu"}),e.jsx(y,{editor:E,data:o.content||"",onChange:(a,i)=>{const n=i.getData();l("content",n)},config:{toolbar:["undo","redo","|","heading","|","bold","italic","underline","strikethrough","highlight","removeFormat","|","link","blockQuote","|","bulletedList","numberedList","outdent","indent","|","insertTable","|","imageUpload","mediaEmbed","|","alignment","fontColor","fontBackgroundColor","fontSize","fontFamily"],ckfinder:{uploadUrl:"/api/upload-image"},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}}),s.content&&e.jsx("p",{className:"text-sm text-red-500",children:s.content}),r.content&&e.jsx("p",{className:"text-sm text-red-500",children:r.content})]})]})]})}export{k as S};
