import{r as u,u as f,j as e,H as N,L as x}from"./app-DEUS2MBr.js";import{S as v,d as y,V as w}from"./index-BQS66ObU.js";import{C,a as E}from"./ckeditor-IcZjwGCE.js";import{b as d,A as k}from"./app-layout-Vwxekgor.js";import{C as p}from"./circle-plus-Du798Pfr.js";import"./app-Dn4CYCCK.js";import"./createLucideIcon-CSZvS206.js";import"./button-C-oOinsX.js";import"./index-BNjgF2tV.js";import"./index-DpawEtTx.js";import"./x-_vUz4eUP.js";import"./index-yQxWDced.js";import"./index-CMWG4mbA.js";import"./logo-lg-DSsbnW8O.js";import"./chevron-right-CS8cLFe1.js";function F({item:t}){const[l,c]=u.useState({}),{data:i,setData:a,post:h,put:b,errors:r,processing:m}=f({name:t?.name||"",slug:t?.slug||"",title:t?.title||"",subtitle:t?.subtitle||"",description:t?.description||""}),g=async()=>{try{return await y.validate(i,{abortEarly:!1}),c({}),!0}catch(s){if(s instanceof w){const n={};s.inner.forEach(o=>{o.path&&(n[o.path]=o.message)}),c(n)}return!1}},j=async s=>{s.preventDefault(),await g()&&(t?b(d.pages.update.url(t.slug),{preserveScroll:!0}):h(d.pages.store.url(),{preserveScroll:!0}))};return u.useEffect(()=>{t&&a({name:t.name||"",slug:t.slug||"",title:t.title||"",subtitle:t.subtitle||"",description:t.description||""})},[t,a]),e.jsxs("form",{onSubmit:j,className:"space-y-4 py-5",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:m,className:"flex items-center rounded bg-blue-600 text-sm px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50 gap-x-2",children:[e.jsx(v,{className:"w-4"}),e.jsxs("span",{children:[" ",m?"Enregistrement...":t?"Mettre à jour la page":"Créer la page A-propos"]})]})}),e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block font-medium",children:"Nom de la page"}),e.jsx("input",{id:"name",type:"text",value:i.name,onChange:s=>a("name",s.target.value),className:"w-full rounded border p-2"}),l.name&&e.jsx("p",{className:"text-sm text-red-500",children:l.name}),r.name&&e.jsx("p",{className:"text-sm text-red-500",children:r.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"slug",className:"block font-medium",children:"Slug"}),e.jsx("input",{id:"slug",type:"text",value:i.slug??"",onChange:s=>a("slug",s.target.value),className:"w-full rounded border p-2"}),l.slug&&e.jsx("p",{className:"text-sm text-red-500",children:l.slug}),r.slug&&e.jsx("p",{className:"text-sm text-red-500",children:r.slug})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block font-medium",children:"Titre"}),e.jsx("input",{id:"title",type:"text",value:i.title??"",onChange:s=>a("title",s.target.value),className:"w-full rounded border p-2"}),l.title&&e.jsx("p",{className:"text-sm text-red-500",children:l.title}),r.title&&e.jsx("p",{className:"text-sm text-red-500",children:r.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"subtitle",className:"block font-medium",children:"Sous titre"}),e.jsx("input",{id:"subtitle",type:"text",value:i.subtitle??"",onChange:s=>a("subtitle",s.target.value),className:"w-full rounded border p-2"}),l.title&&e.jsx("p",{className:"text-sm text-red-500",children:l.title}),r.title&&e.jsx("p",{className:"text-sm text-red-500",children:r.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"content",className:"block font-medium",children:"Description"}),e.jsx(C,{editor:E,data:i.description||"",onChange:(s,n)=>{const o=n.getData();a("description",o)},config:{toolbar:["undo","redo","|","heading","|","bold","italic","underline","strikethrough","highlight","removeFormat","|","link","blockQuote","|","bulletedList","numberedList","outdent","indent","|","insertTable","|","imageUpload","mediaEmbed","|","alignment","fontColor","fontBackgroundColor","fontSize","fontFamily"],ckfinder:{uploadUrl:"/api/upload-image"},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}}),l.description&&e.jsx("p",{className:"text-sm text-red-500",children:l.description}),r.description&&e.jsx("p",{className:"text-sm text-red-500",children:r.description})]})]})]})}function q({pageData:t}){const l=[{title:"Page > "+t?.name||"Non définie",href:"abouts.index"}];return e.jsxs(k,{breadcrumbs:l,children:[e.jsx(N,{title:"A propos"}),e.jsxs("div",{className:"flex justify-between",children:[t&&e.jsx("div",{className:"rounded-xl p-4",children:e.jsxs(x,{className:"flex items-center gap-x-4 max-w-48 cursor-pointer px-2 py-1 text-xs  text-blue-500 rounded border border-blue-500 hover:bg-blue-800 hover:text-white transition-colors duration-500",href:d.sections.index(t.slug),children:[e.jsx(p,{}),e.jsx("span",{children:"Ajouter une section"})]})}),t.slug==="textes-nationaux"&&e.jsx("div",{className:"rounded-xl p-4",children:e.jsxs(x,{className:"flex items-center gap-x-1 max-w-64 cursor-pointer px-2 py-1 text-xs rounded bg-blue-800 text-white transition-colors duration-500",href:d.textes.index(t.slug),children:[e.jsx(p,{}),e.jsx("span",{children:"Ajouter un texte ou une loi"})]})})]}),e.jsx("div",{className:"overflow-hidden bg-white p-4",children:e.jsx(F,{item:t})})]})}export{q as default};
