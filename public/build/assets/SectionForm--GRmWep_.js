import{r as m,u as g,j as e}from"./app-DEUS2MBr.js";import{S as j,s as y,V as v}from"./index-BQS66ObU.js";import{C as N,a as C}from"./ckeditor-IcZjwGCE.js";import{s as u}from"./index-CYKgEzCj.js";function _({item:t,articleId:p}){const[s,c]=m.useState({}),{data:n,setData:r,post:x,put:h,errors:l,processing:d}=g({title:t?.title??"",type:t?.type??"",img_path:t?.img_path??"",content:t?.content??"",status:t?.status??!1,article_id:p}),f=async()=>{try{return await y.validate(n,{abortEarly:!1}),c({}),!0}catch(a){if(a instanceof v){const i={};a.inner.forEach(o=>{o.path&&(i[o.path]=o.message)}),c(i)}return!1}},b=async a=>{a.preventDefault(),await f()&&(t?(h(u.articles.update.url(t.id),{forceFormData:!0,preserveScroll:!0}),console.log(n)):x(u.articles.store.url(),{forceFormData:!0,preserveScroll:!0}))};return m.useEffect(()=>{t&&r({title:t.title??"",type:t.type??"",status:t.status??!1,img_path:t.img_path??"",content:t.content??""})},[t,r]),e.jsxs("form",{onSubmit:b,className:"space-y-4 py-5",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:d,className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50 flex gap-x-2",children:[e.jsx(j,{className:"w-5"}),d?"Enregistrement...":t?"Mettre à jour":"Enregistrer"]})}),e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block font-medium",children:"Titre"}),e.jsx("input",{id:"title",type:"text",value:n.title,onChange:a=>r("title",a.target.value),className:"w-full rounded border p-2"}),s.title&&e.jsx("p",{className:"text-sm text-red-500",children:s.title}),l.title&&e.jsx("p",{className:"text-sm text-red-500",children:l.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"type",className:"block font-medium",children:"Type"}),e.jsxs("select",{id:"type",value:n.type,onChange:a=>r("type",a.target.value),className:"w-full rounded border p-2",children:[e.jsx("option",{value:"",children:"--Sélectionner le type d'article--"}),e.jsx("option",{value:"bulletin",children:"Bulletin"}),e.jsx("option",{value:"bonne pratique",children:"Bonne pratique"}),e.jsx("option",{value:"communiqué de presse",children:"Communiqué de presse"}),e.jsx("option",{value:"actualité",children:"Actualité"})]}),s.type&&e.jsx("p",{className:"text-sm text-red-500",children:s.type}),l.type&&e.jsx("p",{className:"text-sm text-red-500",children:l.type})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"image",className:"block font-medium",children:"Image"}),e.jsx("input",{id:"image",type:"file",accept:"image/*",onChange:a=>r("img_path",a.target.files?a.target.files[0]:""),className:"w-full rounded border p-2"}),s.image&&e.jsx("p",{className:"text-sm text-red-500",children:s.image}),l.img_path&&e.jsx("p",{className:"text-sm text-red-500",children:l.img_path})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("input",{type:"checkbox",checked:n.status===!0,onChange:a=>r("status",a.target.checked)}),e.jsx("label",{htmlFor:"active",className:"font-medium",children:"Statut"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"content",className:"block font-medium",children:"Contenu"}),e.jsx(N,{editor:C,data:n.content||"",onChange:(a,i)=>{const o=i.getData();r("content",o)},config:{toolbar:["undo","redo","|","heading","|","bold","italic","underline","strikethrough","highlight","removeFormat","|","link","blockQuote","|","bulletedList","numberedList","outdent","indent","|","insertTable","|","imageUpload","mediaEmbed","|","alignment","fontColor","fontBackgroundColor","fontSize","fontFamily"],ckfinder:{uploadUrl:"/api/upload-image"},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}}),s.content&&e.jsx("p",{className:"text-sm text-red-500",children:s.content}),l.content&&e.jsx("p",{className:"text-sm text-red-500",children:l.content})]})]})]})}export{_ as S};
