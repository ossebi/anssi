import{r as p,u as j,j as e,H as g,L as v}from"./app-DEUS2MBr.js";import{S as y,e as N,V as w}from"./index-BQS66ObU.js";import{b as l,A as E}from"./app-layout-Vwxekgor.js";import{C}from"./chevron-left-bnlMPVjF.js";import"./app-Dn4CYCCK.js";import"./createLucideIcon-CSZvS206.js";import"./button-C-oOinsX.js";import"./index-BNjgF2tV.js";import"./index-DpawEtTx.js";import"./x-_vUz4eUP.js";import"./index-yQxWDced.js";import"./index-CMWG4mbA.js";import"./logo-lg-DSsbnW8O.js";import"./chevron-right-CS8cLFe1.js";function k({texteData:t,page:i}){const[o,m]=p.useState({}),{data:a,setData:s,post:x,put:f,errors:n,processing:u}=j({title:t?.title||"",description:t?.description||"",path:t?.path||"",page_id:i.id}),h=async()=>{try{return await N.validate(a,{abortEarly:!1}),m({}),!0}catch(r){if(r instanceof w){const c={};r.inner.forEach(d=>{d.path&&(c[d.path]=d.message)}),m(c)}return!1}},b=async r=>{r.preventDefault(),await h()&&(t?f(l.textes.update.url(t.id),{forceFormData:!0,preserveScroll:!0}):x(l.textes.store.url(),{preserveScroll:!0}))};return p.useEffect(()=>{t&&s({title:t.title||"",description:t.description||"",path:t.path||"",page_id:i.id})},[t,s]),e.jsxs("form",{onSubmit:b,className:"space-y-4 py-5",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:u,className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50 flex gap-x-2",children:[e.jsx(y,{className:"w-5"}),u?"Enregistrement...":t?"Mettre à jour":"Enregistrer"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Titre du texte ou de la loi"}),e.jsx("input",{type:"text",value:a.title,onChange:r=>s("title",r.target.value),className:"mt-1 block w-full border p-3 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.title||n.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:a.description||"",onChange:r=>s("description",r.target.value),className:"mt-1 block w-full border p-3 focus:border-blue-500 focus:ring-blue-500 sm:text-sm",rows:3}),e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.description||n.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Chemin du fichier (URL ou chemin relatif)"}),e.jsx("input",{type:"file",onChange:r=>{r.target.files&&r.target.files[0]&&s("path",r.target.files[0])},className:"mt-1 block w-full border p-3 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.path||n.path})]})]})}function G({page:t}){const i=[{title:"Créer > Texte ou loi",href:l.textes.create.url(t.slug)}];return e.jsxs(E,{breadcrumbs:i,children:[e.jsx(g,{title:"Textes & lois"}),e.jsxs("div",{className:"rounded-xl p-4",children:[e.jsxs(v,{className:"cursor-pointer px-3 py-1 text-xs text-blue-500 rounded border border-blue-500 hover:bg-blue-800 hover:text-white transition-colors duration-500 flex items-center max-w-20",href:l.textes.index(t.slug),children:[e.jsx(C,{}),e.jsx("span",{children:"Retour"})]}),e.jsx(k,{page:t})]})]})}export{G as default};
