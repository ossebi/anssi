import{r as m,u as j,j as e}from"./app-DEUS2MBr.js";import{S as v,c as C,V as E}from"./index-BQS66ObU.js";import{C as u,a as p}from"./ckeditor-IcZjwGCE.js";import{v as b}from"./app-layout-Vwxekgor.js";function S({item:t}){const[i,d]=m.useState({}),{data:l,setData:a,post:x,put:h,errors:s,processing:c}=j({title:t?.title??"",content:t?.content??"",description:t?.description??""}),f=async()=>{try{return await C.validate(l,{abortEarly:!1}),d({}),!0}catch(o){if(o instanceof E){const n={};o.inner.forEach(r=>{r.path&&(n[r.path]=r.message)}),d(n)}return!1}},g=async o=>{o.preventDefault(),await f()&&(t?h(b.update.url(t.id),{preserveScroll:!0}):x(b.store.url(),{preserveScroll:!0}))};return m.useEffect(()=>{t&&a({title:t.title??"",description:t.description??"",content:t.content??""})},[t,a]),e.jsxs("form",{onSubmit:g,className:"space-y-4 py-5",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:c,className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50 flex gap-x-2",children:[e.jsx(v,{className:"w-5"}),c?"Enregistrement...":t?"Mettre Ã  jour":"Enregistrer"]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block font-medium",children:"Titre"}),e.jsx("input",{id:"title",type:"text",value:l.title,onChange:o=>a("title",o.target.value),className:"w-full rounded border p-2"}),i.title&&e.jsx("p",{className:"text-sm text-red-500",children:i.title}),s.title&&e.jsx("p",{className:"text-sm text-red-500",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block font-medium",children:"Description"}),e.jsx(u,{editor:p,data:l.description,onChange:(o,n)=>{const r=n.getData();a("description",r)},config:{toolbar:["undo","redo","|","heading","|","bold","italic","underline","strikethrough","highlight","removeFormat","|","link","blockQuote","|","bulletedList","numberedList","outdent","indent","|","insertTable","|","imageUpload","mediaEmbed","|","alignment","fontColor","fontBackgroundColor","fontSize","fontFamily"],table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}}),i.description&&e.jsx("p",{className:"text-sm text-red-500",children:i.description}),s.description&&e.jsx("p",{className:"text-sm text-red-500",children:s.description})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block font-medium",children:"Contenu"}),e.jsx(u,{editor:p,data:l.content||"",onChange:(o,n)=>{const r=n.getData();a("content",r)},config:{toolbar:["undo","redo","|","heading","|","bold","italic","underline","strikethrough","highlight","removeFormat","|","link","blockQuote","|","bulletedList","numberedList","outdent","indent","|","insertTable","|","imageUpload","mediaEmbed","|","alignment","fontColor","fontBackgroundColor","fontSize","fontFamily"],ckfinder:{uploadUrl:"/api/upload-image"},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}}),i.content&&e.jsx("p",{className:"text-sm text-red-500",children:i.content}),s.content&&e.jsx("p",{className:"text-sm text-red-500",children:s.content})]})]})}export{S as V};
